function cactusMasonry(){this.id,this.isIe9=!1,this.showLoader=!0,this.infiniteScroll=!0,this.fitWidth=!1,this.forceAutoWidth=!1,this.postsPerPage=30,this.softGutter=0,this.transitionDuration=0,this.width="auto",this.elems=Array(),this.pageStart=0,this.pageEnd=0,this.pagePosition=0,this.lastImageOffset=0,this.loading=!1,this.spinner=null,this.spinbox=null,this.spincontainer=null,this.msnry=null,this.opts={lines:13,length:0,width:6,radius:12,corners:1,rotate:0,direction:1,color:"#DFDFDF",speed:1.2,trail:100,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}cactusMasonry.prototype.init=function(t,i){function e(t){return t===!0||"true"===t||-1!==t&&t!==!1&&"false"!==t?!0:!1}this.id=t,null!=i.isIe9&&(this.isIe9=e(i.isIe9)),null!=i.showLoader&&(this.showLoader=e(i.showLoader)),null!=i.infiniteScroll&&(this.infiniteScroll=e(i.infiniteScroll)),null!=i.fitWidth&&(this.fitWidth=e(i.fitWidth)),null!=i.forceAutoWidth&&(this.forceAutoWidth=e(i.forceAutoWidth)),null!=i.postsPerPage&&(this.postsPerPage=i.postsPerPage),null!=i.softGutter&&(this.softGutter=i.softGutter),null!=i.transitionDuration&&(this.transitionDuration=i.transitionDuration),null!=i.width&&(this.width=i.width)},cactusMasonry.prototype.updateGallery=function(){this.msnry.layout()},cactusMasonry.prototype.drawGallery=function(t){this.elems=t.slice(),this.showLoader&&(this.spinner=new Spinner(this.opts),this.isIe9||(this.spinbox=document.getElementById("MPG_Spin_Box"),this.spinbox.style.width="50px",this.spinbox.appendChild(this.spinner.spin().el)),this.spincontainer=document.getElementById("MPG_Loader_Container"),this.spincontainer.style.display="block",this.spincontainer.style.opacity="1");var i=this.elems.length;i>0?(this.loading=!0,this.pageEnd=this.returnIfTrue(this.infiniteScroll,Math.min(i,this.postsPerPage),i),this.add_elem(0)):this.showLoader&&(document.getElementById("MPG_Loader_Container").style.display="none")},cactusMasonry.prototype.returnIfTrue=function(t,i,e){return"undefined"===e&&(e=""),t===!0?i:e},cactusMasonry.prototype.add_elem=function(t){this.loading=!0,document.getElementById(this.id).appendChild(this.elems[t]),imagesLoaded("#"+this.id,function(){this.msnry=new Masonry("#"+this.id,{columnWidth:this.returnIfTrue(this.forceAutoWidth,this.getColumnWidth(),this.returnIfTrue("auto"!==this.width,".masonry_brick",this.getColumnWidth())),stamp:".masonry_stamp",itemSelector:".masonry_brick",gutter:this.softGutter,isFitWidth:this.fitWidth,transitionDuration:this.transitionDuration}),this.elems[t].style.transition="opacity 0.5s",this.elems[t].style.opacity="1",t+1<this.elems.length&&(!this.infiniteScroll||this.pagePosition<this.pageEnd)?(this.endOfPage(this.getOffsetTop(this.elems[t]))&&(this.pageEnd=this.returnIfTrue(this.infiniteScroll,Math.min(this.elems.length,this.pageEnd+1),this.elems.length)),this.pagePosition++,this.add_elem(t+1),this.showLoader&&(document.getElementById("MPG_Loader").innerHTML="Loading ("+((t-this.pageStart)/(this.pageEnd-this.pageStart)*100|0)+"%)")):(this.showLoader&&(document.getElementById("MPG_Loader").innerHTML="Loaded (100%)",document.getElementById("MPG_Loader_Container").style.opacity="0",this.isIe9&&(document.getElementById("MPG_Loader_Container").style.visibility="hidden"),this.isIe9||this.spinner.stop()),this.infiniteScroll&&this.pagePosition+1<this.elems.length&&(this.pageStart=this.pageEnd,this.pageEnd=Math.min(this.pageStart+this.postsPerPage,this.elems.length),this.lastImageOffset=this.getOffsetTop(this.elems[t]),window.onscroll=this.scrollListener.bind(this)),this.loading=!1)}.bind(this))},cactusMasonry.prototype.getOffsetTop=function(t){for(var i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetTop-t.scrollTop,t=t.offsetParent;return i},cactusMasonry.prototype.endOfPage=function(t){return"number"==typeof window.innerHeight?window.pageYOffset+1.25*window.innerHeight>=t:document.documentElement.scrollTop+1.25*document.documentElement.clientHeight>=t},cactusMasonry.prototype.scrollListener=function(){this.loadNextSection()},cactusMasonry.prototype.loadNextSection=function(){this.endOfPage(this.lastImageOffset)&&(this.loading=!0,this.showLoader&&(this.isIe9?document.getElementById("MPG_Loader_Container").style.visibility="visible":document.getElementById("MPG_Spin_Box").appendChild(this.spinner.spin().el),document.getElementById("MPG_Loader_Container").style.opacity="1"),window.onscroll=null,this.add_elem(this.pagePosition))},cactusMasonry.prototype.gcd=function(t){if(!t.length)return 0;for(var i,e,s=t.length-1,n=t[s];s;)for(e=t[--s];i=e%n;e=n,n=i);return n},cactusMasonry.prototype.getColumnWidth=function(){var t=new Array,i=null;i=this.isIe9?document.querySelector(".masonry_brick"):document.getElementsByClassName("masonry_brick");for(var e=0;e<i.length;e++)t.push(i[e].offsetWidth);return this.gcd(t)};